(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))n(s);new MutationObserver(s=>{for(const c of s)if(c.type==="childList")for(const r of c.addedNodes)r.tagName==="LINK"&&r.rel==="modulepreload"&&n(r)}).observe(document,{childList:!0,subtree:!0});function o(s){const c={};return s.integrity&&(c.integrity=s.integrity),s.referrerpolicy&&(c.referrerPolicy=s.referrerpolicy),s.crossorigin==="use-credentials"?c.credentials="include":s.crossorigin==="anonymous"?c.credentials="omit":c.credentials="same-origin",c}function n(s){if(s.ep)return;s.ep=!0;const c=o(s);fetch(s.href,c)}})();document.addEventListener("DOMContentLoaded",L);function L(){E(),S(),v(),b(),l()}function l(){const t=document.querySelectorAll(".js-count-cart"),e=d("cart");let o=0;e.forEach(n=>o+=n.price*n.count),t.forEach(n=>{const s=n.parentElement.querySelector(".js-cart-text");n.innerText=e.length??"0",n.classList.toggle("show",!!e.length),s.innerText=e.length?`${o} ₽`:"Корзина"})}function v(){document.querySelectorAll(".js-add-cart").forEach(e=>{e.addEventListener("click",()=>{const o=e.closest(".goods-card");h(o),o.querySelector(".js-product-label").classList.add("show"),e.setAttribute("hidden","hidden")})})}function h(t){const o=t.getAttributeNames().filter(r=>r.includes("data")),n=o.map(r=>r.replace("data-","")),s=t.querySelector(".js-product-count").value,c={};t.setAttribute("data-count",s),n.forEach((r,a)=>{c[r]=t.getAttribute(o[a])}),w(c),l()}function b(){localStorage.cart&&JSON.parse(localStorage.cart).forEach(e=>{const o=document.querySelector(`.goods-card[data-id='${e.id}']`),n=o.querySelector(".js-product-count"),s=n.parentElement;o.setAttribute("data-count",e.count),n.value=e.count,s.classList.add("show"),s.nextElementSibling.setAttribute("hidden","hidden")})}function w(t){const e=d("cart");if(e.length){const o=e.findIndex(n=>n.id===t.id);o>=0&&+t.count>0?e[o]=t:e.push(t)}else e.push(t);g("cart",e)}function d(t){const e=localStorage[t];return e?JSON.parse(e):[]}function g(t,e){localStorage[t]=JSON.stringify(e)}function S(){document.querySelectorAll(".js-product-count").forEach(e=>{e.addEventListener("change",()=>{e.value%1>0&&(e.value=Math.floor(e.value)),e.value<0&&(e.value="1")})})}function E(){document.addEventListener("click",t=>{const e=t.target.classList;e.contains("js-card-btn-inc")?u(t.target):e.contains("js-card-btn-dec")&&u(t.target,!1)})}function u(t,e=!0){const o=t.closest(".goods-card"),n=t.closest(".goods-card-buy__label"),s=n.querySelector("input");let c=Number(s.value);if(!e&&c-1<1){const r=d("cart"),a=o.getAttribute("data-id"),m=r.findIndex(p=>p.id===a);return n.classList.remove("show"),n.nextElementSibling.removeAttribute("hidden"),o.setAttribute("data-count","0"),r.splice(m,1),g("cart",r),l(),!1}s.value=e?(++c).toString():(--c).toString(),h(o)}window.addEventListener("load",()=>document.body.classList.add("loaded"));document.addEventListener("DOMContentLoaded",()=>{[".js-swiper-goods-new",".js-swiper-goods-promo",".js-swiper-goods-hit"].forEach(e=>j(e)),y()});function y(){q(),k(),O(),A(),C(),x()}function A(){const t=document.querySelectorAll("[data-search]"),e=document.querySelector(".js-hint-result");t.forEach(o=>{o.addEventListener("input",()=>{let n=o.value.length>2;if(n){let s=[{name:"Шарики сердце",link:"link-1"},{name:"Шарики 8 марта",link:"link-2"},{name:"Шарики с днем рожденья",link:"link-3"}];e.innerHTML="",s.forEach(c=>{const r=`<li class="header-search-hint__item">
                                <a href="#${c.link}" class="header-search-hint__link">${c.name}</a>
                            </li>`;e.insertAdjacentHTML("afterbegin",r)})}o.closest(".header-search").setAttribute("data-hint",n)})})}function C(){const t=document.querySelectorAll(".js-open-catalog"),e=document.querySelector(".catalog-menu-head__close"),o=document.body.classList,n="show-catalog";t.forEach(s=>s.addEventListener("click",()=>o.toggle(n))),e.addEventListener("click",()=>o.remove(n))}function j(t){new Swiper(t,{breakpoints:{320:{slidesPerView:2,spaceBetween:8},576:{slidesPerView:2,spaceBetween:16},768:{slidesPerView:3,spaceBetween:16},1170:{slidesPerView:4,spaceBetween:24}},navigation:{nextEl:".swiper-goods-nav.swiper-button-next",prevEl:".swiper-goods-nav.swiper-button-prev"}})}function q(){const t=document.querySelectorAll(".js-dropdown .nav-link"),e=[...t].map(o=>new bootstrap.Dropdown(o));t.forEach((o,n)=>{const s=o.closest(".js-dropdown");let c;o.addEventListener("mouseenter",()=>{s.classList.add("dropdown-show"),c=setTimeout(()=>{s.classList.contains("dropdown-show")&&e[n].show()},100)}),s.addEventListener("mouseleave",()=>{s.classList.remove("dropdown-show"),clearTimeout(c),e[n].hide()})})}function k(){document.querySelectorAll(".js-catalog-list > li").forEach(e=>{e.addEventListener("mouseenter",()=>{const o=e.getAttribute("data-category"),n=document.querySelector(`.catalog-category-content[data-content-category='${o}']`);n&&(n.classList.add("show"),n.getSiblings().forEach(s=>s.classList.remove("show"))),e.classList.add("active"),e.getSiblings().forEach(s=>s.classList.remove("active"))})})}function x(){document.querySelectorAll(".js-catalog-list-mobile li > a").forEach(e=>{e.addEventListener("click",()=>{const o=e.parentElement;o.getSiblings().forEach(n=>n.classList.remove("is-open")),o.querySelectorAll(".is-open").forEach(n=>{n.classList.remove("is-open")}),o.classList.toggle("is-open")})})}function O(){f(),window.addEventListener("scroll",f)}function f(){matchMedia("(min-width: 992px)").matches&&(scrollY>72?document.body.classList.add("header-fixed"):document.body.classList.remove("header-fixed"))}function i(t,e,o=[]){let n=e?t.nextElementSibling:t.previousElementSibling;return n!=null?(o.push(n),i(n,e,o)):o}Object.prototype.getSiblings=function(){return[...i(this,!1),...i(this,!0)]};
