(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))o(s);new MutationObserver(s=>{for(const c of s)if(c.type==="childList")for(const r of c.addedNodes)r.tagName==="LINK"&&r.rel==="modulepreload"&&o(r)}).observe(document,{childList:!0,subtree:!0});function t(s){const c={};return s.integrity&&(c.integrity=s.integrity),s.referrerpolicy&&(c.referrerPolicy=s.referrerpolicy),s.crossorigin==="use-credentials"?c.credentials="include":s.crossorigin==="anonymous"?c.credentials="omit":c.credentials="same-origin",c}function o(s){if(s.ep)return;s.ep=!0;const c=t(s);fetch(s.href,c)}})();document.addEventListener("DOMContentLoaded",L);function L(){C(),b(),S(),v(),h()}function h(){const n=document.querySelectorAll(".js-count-cart"),e=m("cart");let t=0;e.forEach(o=>t+=o.price*o.count),n.forEach(o=>{const s=o.parentElement.querySelector(".js-cart-text");o.innerText=e.length??"0",o.classList.toggle("show",!!e.length),s.innerText=e.length?`${t} ₽`:"Корзина"})}function S(){document.querySelectorAll(".js-add-cart").forEach(e=>{e.addEventListener("click",()=>{const t=e.closest(".goods-card"),s=t.getAttributeNames().filter(a=>a.includes("data")),c=s.map(a=>a.replace("data-","")),r=Number(t.querySelector(".js-product-count").value),p=Number(t.getAttribute("data-count")),l=t.querySelector(".js-count-to-cart"),d=(p+r).toString(),u={};t.setAttribute("data-count",d),l.innerText=d,l.parentElement.classList.add("show"),c.forEach((a,w)=>{u[a]=t.getAttribute(s[w])}),y(u),h()})})}function v(){localStorage.cart&&JSON.parse(localStorage.cart).forEach(e=>{const t=document.querySelector(`.goods-card[data-id='${e.id}']`),o=t.querySelector(".js-count-to-cart");t.setAttribute("data-count",e.count),o.innerText=e.count,o.parentElement.classList.add("show")})}function y(n){const e=m("cart");if(e.length){const t=e.findIndex(o=>o.id===n.id);t>=0?e[t]=n:(console.log("23"),e.push(n))}else e.push(n);E("cart",e)}function m(n){const e=localStorage[n];return e?JSON.parse(e):[]}function E(n,e){localStorage[n]=JSON.stringify(e)}function b(){document.querySelectorAll(".js-product-count").forEach(e=>{e.addEventListener("change",()=>{e.value%1>0&&(e.value=Math.floor(e.value)),e.value<0&&(e.value="1")})})}function C(){document.addEventListener("click",n=>{const e=n.target.classList;e.contains("js-card-btn-inc")?f(n.target):e.contains("js-card-btn-dec")&&f(n.target,!1)})}function f(n,e=!0){const t=n.closest(".goods-card-buy__label").querySelector("input");let o=Number(t.value);if(!e&&o-1<1)return!1;t.value=e?(++o).toString():(--o).toString()}window.addEventListener("load",()=>document.body.classList.add("loaded"));document.addEventListener("DOMContentLoaded",()=>{[".js-swiper-goods-new",".js-swiper-goods-promo",".js-swiper-goods-hit"].forEach(e=>A(e)),j()});function j(){x(),N(),P(),q(),k(),O()}function q(){const n=document.querySelectorAll("[data-search]"),e=document.querySelector(".js-hint-result");n.forEach(t=>{t.addEventListener("input",()=>{let o=t.value.length>2;if(o){let s=[{name:"Шарики сердце",link:"link-1"},{name:"Шарики 8 марта",link:"link-2"},{name:"Шарики с днем рожденья",link:"link-3"}];e.innerHTML="",s.forEach(c=>{const r=`<li class="header-search-hint__item">
                                <a href="#${c.link}" class="header-search-hint__link">${c.name}</a>
                            </li>`;e.insertAdjacentHTML("afterbegin",r)})}t.closest(".header-search").setAttribute("data-hint",o)})})}function k(){const n=document.querySelectorAll(".js-open-catalog"),e=document.querySelector(".catalog-menu-head__close"),t=document.body.classList,o="show-catalog";n.forEach(s=>s.addEventListener("click",()=>t.toggle(o))),e.addEventListener("click",()=>t.remove(o))}function A(n){new Swiper(n,{breakpoints:{320:{slidesPerView:2,spaceBetween:8},576:{slidesPerView:2,spaceBetween:16},768:{slidesPerView:3,spaceBetween:16},1170:{slidesPerView:4,spaceBetween:24}},navigation:{nextEl:".swiper-goods-nav.swiper-button-next",prevEl:".swiper-goods-nav.swiper-button-prev"}})}function x(){const n=document.querySelectorAll(".js-dropdown .nav-link"),e=[...n].map(t=>new bootstrap.Dropdown(t));n.forEach((t,o)=>{const s=t.closest(".js-dropdown");let c;t.addEventListener("mouseenter",()=>{s.classList.add("dropdown-show"),c=setTimeout(()=>{s.classList.contains("dropdown-show")&&e[o].show()},100)}),s.addEventListener("mouseleave",()=>{s.classList.remove("dropdown-show"),clearTimeout(c),e[o].hide()})})}function N(){document.querySelectorAll(".js-catalog-list > li").forEach(e=>{e.addEventListener("mouseenter",()=>{const t=e.getAttribute("data-category"),o=document.querySelector(`.catalog-category-content[data-content-category='${t}']`);o&&(o.classList.add("show"),o.getSiblings().forEach(s=>s.classList.remove("show"))),e.classList.add("active"),e.getSiblings().forEach(s=>s.classList.remove("active"))})})}function O(){document.querySelectorAll(".js-catalog-list-mobile li > a").forEach(e=>{e.addEventListener("click",()=>{const t=e.parentElement;t.getSiblings().forEach(o=>o.classList.remove("is-open")),t.querySelectorAll(".is-open").forEach(o=>{o.classList.remove("is-open")}),t.classList.toggle("is-open")})})}function P(){g(),window.addEventListener("scroll",g)}function g(){matchMedia("(min-width: 992px)").matches&&(scrollY>72?document.body.classList.add("header-fixed"):document.body.classList.remove("header-fixed"))}function i(n,e,t=[]){let o=e?n.nextElementSibling:n.previousElementSibling;return o!=null?(t.push(o),i(o,e,t)):t}Object.prototype.getSiblings=function(){return[...i(this,!1),...i(this,!0)]};
